#summary How to create new releases of My Tracks.
#labels Phase-Deploy

= Target users =

This document is meant for My Tracks team members who want to create a new version of My Tracks to be posted on the Android Market.

= Steps =

== Repository clone ==

If you don't have it already, make a clean clone of the repository:

{{{
$ hg clone https://mytracks.googlecode.com/hg/ mytracks
}}}

== Preparation ==
  * update android:versionCode and android:versionName in the AndroidManifest.xml
  * request new strings for translation
  * update translated strings in all locales

== Testing ==
  * run the unit tests.
  * change the project build target from the latest supported Android version to the oldest supported version. The code that do not compile should make sense.
  * test both the latest supported Android version and the oldest supported version. Using emulator is OK.
  * test with actual GPS recording outdoor.
  * (optional) make sure all the eclipse warnings make sense.
  * (optional) make sure all the Android lint warning make sense. 
 
== Release tagging ==

Once you know that the state of the repository is exactly what you want to release, tag it with the release version:

{{{
$ hg tag v1.0.13
}}}

== APK generation ==

To generate a release APK, from Eclipse, right-click on the MyTracks project, choose Export, Android Application, then follow the steps by selecting the keystore and typing in its password (if you're releasing, you probably know where to find those, they're not public for security reasons).

When the APK is exported, ProGuard runs on it (to reduce APK size, but it also does obfuscation). You *MUST* keep the files from the proguard subdirectory (that's generated during the export) so that any stack traces are useful. For safety, don't just keep them - send them to mytracks-dev@googlegroups.com so all developers have access to them for debugging.

After this, the generated APK can be uploaded directly to the Android Market. Don't forget to update the fields in the Android Market as appropriate.

== E-mail ==

It's customary to announce new releases to mytracks@googlegroups.com. Make sure you mention what's new in your release (in a human-readable way, the mercurial change log is NOT ok).